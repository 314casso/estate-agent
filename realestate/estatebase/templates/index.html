{% extends "base.html" %}

{% block head %}

<style>
	.ui-selecting {
		background: #FECA40 !important;
	}
	.ui-selected {
		background: #F39814 !important;
		color: white;
	}

</style>
<script type="text/javascript">
	$(function() {
		$('a.ajax').click(function() {
			var url = this.href;
			// show a spinner or something via css
			var dialog = $('<div style="display:none" class="loading"></div>').appendTo('body');
			// open the dialog
			dialog.dialog({
				// add a close listener to prevent adding multiple divs to the document
				close : function(event, ui) {
					// remove div with all data and events
					dialog.remove();
				},
				modal : true
			});
			// load remote content
			dialog.load(url, // omit this param object to issue a GET request instead a POST request, otherwise you may provide post parameters within the object
			function(responseText, textStatus, XMLHttpRequest) {
				// remove the loading class
				dialog.removeClass('loading');
			});
			//prevent the browser to follow the link
			return false;
		});
	}); 
</script>

{% endblock %}

{% block left %}
<a class="ajax" href="http://www.rbc.ru">
      Open as dialog
    </a>

<div id="estate_nav">
	{% for estate_category in estate_categories %}
	<h3><a href="#">{{ estate_category.name }}</a></h3>
	<div>
		<ul>
			{% for estate_type in estate_category.estatetype_set.all %}
			<li>
				<a href="#">{{ estate_type.name }}</a><a class="ajax" href="{% url estate_create estate_type.pk %}">ADD</a>
			</li>
			{% endfor %}
		</ul>
	</div>
	{% endfor %}
</div>
{% endblock %}